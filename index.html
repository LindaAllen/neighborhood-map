<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Plainville Neighborhood Map</title>
    <meta name="description" content="Plainville CT Neighborhood Map">
    <meta name="author" content="Linda Allen">
    <meta name="viewport" content="width=device-width">

    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD66VY78WBNPsvhYujsJK2uacxLVPfWpRo">
    </script>
    <script src="js/knockout-3.3.0.js"></script>
    <script src="js/jquery-2.1.3.min.js"></script>
    <script src="js/oauth.js"></script>
    <script src="js/sha1.js"></script>
    <script src="js/yelpAPI.js"></script>

    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/styles.css">
</head>

<body>

<div class="container">
    <div class="title-outer col-xs-12">
        <div class="row">
            <div class="titlebar col-xs-12">
                <h2>Plainville Neighborhood Map</h2>
                <div>Search: <input class="form-control search-field" data-bind="textInput: searchReq"></div>
            </div>
        </div>
    </div>
    <div class="map-outer col-xs-12">
        <div class="row">
            <div class="sidebar col-xs-4">
                <p>Locations:</p>
                <div class="loc-list" data-bind="foreach: filtered">
                    <button data-bind="text: title, click: map.toggleBounce"></button>
                    <br>
                </div>
            </div> <!--sidebar-->

            <div class="map-container col-xs-8"></div>

        </div><!--row-->
    </div><!--map-outer-->
</div><!--container-->

<script src="js/scripts.js"></script>
<script>

    if (!window.google || !window.google.maps) {
        $('#map-container').text('Error: Google Maps data could not be loaded');
        $('#map-list').text('Error: Google Maps data could not be loaded');
    }

    var markers = [
        {
            title: "Zen Bar",
            category: "pub",
            address: "317 Farmington Ave, Plainville CT, 06062",
            phone: "(860) 747-8886",
            status: ko.observable("OK"),
            marker: new google.maps.Marker({
                position: new google.maps.LatLng(0, 0),
                icon: "img/pins/bar.png"
            })
        },
        {
            title: "J.Timothy;s Tavern",
            category: "restuarant",
            address: "143 New Britian Ave, Plainville CT, 06062",
            phone: "(860) 747-6813",
            status: ko.observable("OK"),
            marker: new google.maps.Marker({
                position: new google.maps.LatLng(0, 0),
                icon: "img/pins/restaurant.png"
            })
        },
        {
            title: "Starbucks",
            category: "coffee",
            address: "275 New Britian Ave, Plainville CT, 06062",
            phone: "(860) 747-4977",
            status: ko.observable("OK"),
            marker: new google.maps.Marker({
                position: new google.maps.LatLng(0, 0),
                icon: "img/pins/coffee.png"
            })
        },
        {
            title: "Gnazzo's Food Center",
            category: "supermarket",
            address: "73 East Street, Plainville CT, 06062",
            phone: "(860) 747-8758",
            status: ko.observable("OK"),
            marker: new google.maps.Marker({
                position: new google.maps.LatLng(0, 0),
                icon: "img/pins/supermarket.png"
            })
        },
        {
            title: "Friendly's",
            category: "restaurant",
            address: "230 New Britian Ave, Plainville CT, 06062",
            phone: "(860) 410-9703",
            status: ko.observable("OK"),
            marker: new google.maps.Marker({
                position: new google.maps.LatLng(0, 0),
                icon: "img/pins/restaurant.png"
            })
        },
        {
            title: "Red Zone Grille",
            category: "pub",
            address: "54 West Main Street, Plainville CT 06062",
            phone: "(860) 747-2277",
            status: ko.observable("OK"),
            marker: new google.maps.Marker({
                position: new google.maps.LatLng(0, 0),
                icon: "img/pins/bar.png"
            })
        },
        {
            title: "Central Cafe",
            category: "pub",
            address: "24 Whiting Street, Plainville CT 06062",
            phone: "(860) 747-0405",
            status: ko.observable("OK"),
            marker: new google.maps.Marker({
                position: new google.maps.LatLng(0, 0),
                icon: "img/pins/bar.png"
            })
        },
        {
            title: "Dunkin Donuts",
            category: "coffee",
            address: "19 East Street, Plainville CT, 06062",
            phone: "(860) 793-2662",
            status: ko.observable("OK"),
            marker: new google.maps.Marker({
                position: new google.maps.LatLng(0, 0),
                icon: "img/pins/coffee.png"
            })
        }
    ];

    var map;

    google.maps.event.addDomListener(window, 'load', function () {
        var options = {
            map: {
                center: new google.maps.LatLng(41.6737711, -72.8589988),
                zoom: 14
            }
        };
        map = new NeighborhoodMap(markers, options);
        ko.pureComputed(map.filterLocations, map);
        ko.applyBindings(map);
        map.start();
    });

</script>

</body>
</html>
